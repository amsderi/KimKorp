<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KIM KORP ‚Äî Esports</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Rajdhani:wght@400;500;600;700&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
<style>
:root{--bg:#0a0a0f;--card:#12121c;--accent:#ff2d6b;--glow:rgba(255,45,107,0.4);--accent2:#c724ff;--gold:#ffd700;--text:#e8e6f0;--muted:#8a8899;--border:rgba(255,255,255,0.06);--grad:linear-gradient(135deg,#ff2d6b,#c724ff);--gradd:linear-gradient(180deg,#0a0a0f 0%,#141428 100%)}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Rajdhani',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;overflow-x:hidden}
body::before{content:'';position:fixed;inset:0;background:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");pointer-events:none;z-index:9999}
::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:var(--bg)}::-webkit-scrollbar-thumb{background:var(--accent);border-radius:3px}

/* Header */
header{position:fixed;top:0;left:0;right:0;z-index:1000;background:rgba(10,10,15,0.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border)}
.hi{max-width:1400px;margin:0 auto;padding:0 40px;height:72px;display:flex;align-items:center;justify-content:space-between}
.logo{font-family:'Orbitron',sans-serif;font-size:28px;font-weight:900;letter-spacing:4px;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent;cursor:pointer;position:relative}
.logo::after{content:'‚ö°';position:absolute;right:-28px;top:-2px;font-size:18px;-webkit-text-fill-color:var(--accent);animation:pulse 2s ease-in-out infinite}
@keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(.9)}}
nav{display:flex;gap:6px;align-items:center}
nav button{font-family:'Rajdhani',sans-serif;font-size:14px;font-weight:700;letter-spacing:2px;text-transform:uppercase;background:none;border:none;color:var(--muted);padding:10px 20px;cursor:pointer;position:relative;transition:color .3s}
nav button:hover,nav button.active{color:var(--accent)}
nav button.active::after{content:'';position:absolute;bottom:0;left:20px;right:20px;height:2px;background:var(--grad);border-radius:1px;box-shadow:0 0 10px var(--glow)}
.atgl{background:var(--grad)!important;color:#fff!important;border-radius:3px!important;padding:8px 16px!important;font-size:12px!important;margin-left:12px;-webkit-text-fill-color:#fff}
.atgl.on{background:rgba(255,45,107,.15)!important;border:1px solid var(--accent)!important;color:var(--accent)!important;-webkit-text-fill-color:var(--accent)}

/* Hero */
.hero{position:relative;height:500px;display:flex;align-items:center;justify-content:center;text-align:center;overflow:hidden;margin-top:72px}
.hero-bg{position:absolute;inset:0;background:radial-gradient(ellipse 80% 60% at 50% 40%,rgba(255,45,107,.15),transparent),radial-gradient(ellipse 60% 50% at 70% 60%,rgba(199,36,255,.1),transparent),var(--gradd)}
.hero-lines{position:absolute;inset:0;background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(255,45,107,.03) 2px,rgba(255,45,107,.03) 4px);animation:scan 8s linear infinite}
@keyframes scan{0%{transform:translateY(0)}100%{transform:translateY(4px)}}
.hero-content{position:relative;z-index:2}
.hero h1{font-family:'Orbitron',sans-serif;font-size:clamp(48px,8vw,96px);font-weight:900;letter-spacing:12px;line-height:1;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:heroIn 1s ease-out}
.hero .sub{font-family:'Bebas Neue',sans-serif;font-size:22px;letter-spacing:10px;color:var(--muted);margin-top:12px;animation:heroIn 1s ease-out .2s both}
.hero .tag{font-size:16px;color:var(--accent);margin-top:20px;font-weight:600;letter-spacing:3px;text-transform:uppercase;animation:heroIn 1s ease-out .4s both}
@keyframes heroIn{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
.dia{position:absolute;width:12px;height:12px;border:2px solid var(--accent);transform:rotate(45deg);opacity:.3}
.dia:nth-child(2){top:20%;left:15%;animation:fl 6s ease-in-out infinite}
.dia:nth-child(3){top:60%;right:12%;animation:fl 8s ease-in-out infinite 1s}
.dia:nth-child(4){bottom:15%;left:25%;width:8px;height:8px;border-color:var(--accent2);animation:fl 7s ease-in-out infinite .5s}
@keyframes fl{0%,100%{transform:rotate(45deg) translateY(0)}50%{transform:rotate(45deg) translateY(-15px)}}

/* Layout */
.main{max-width:1400px;margin:0 auto;padding:40px 40px 80px}
.pt{font-family:'Orbitron',sans-serif;font-size:36px;font-weight:900;letter-spacing:6px;margin-bottom:8px;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.ps{color:var(--muted);font-size:15px;letter-spacing:3px;text-transform:uppercase;margin-bottom:40px}
.sr{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:40px}
.sb{background:var(--card);border:1px solid var(--border);border-radius:4px;padding:24px;text-align:center}
.sb .sv{font-family:'Orbitron',sans-serif;font-size:32px;font-weight:900;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.sb .sl{font-size:12px;color:var(--muted);letter-spacing:2px;text-transform:uppercase;margin-top:6px}

/* News */
.ng{display:grid;grid-template-columns:repeat(auto-fill,minmax(380px,1fr));gap:28px}
.nc{background:var(--card);border:1px solid var(--border);border-radius:4px;overflow:hidden;transition:all .4s;cursor:pointer;position:relative}
.nc::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:var(--grad);transform:scaleX(0);transform-origin:left;transition:transform .4s}
.nc:hover::before{transform:scaleX(1)}.nc:hover{transform:translateY(-4px);border-color:rgba(255,45,107,.2);box-shadow:0 20px 40px rgba(0,0,0,.4)}
.nt{width:100%;height:200px;background:linear-gradient(135deg,#1a1a2e,#2d1a3e);display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}
.nt img{width:100%;height:100%;object-fit:cover;position:absolute;inset:0}
.nt .oi{font-size:60px;opacity:.15}
.nb{padding:24px}
.ntg{display:inline-block;font-size:11px;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:4px 12px;border-radius:2px;margin-bottom:12px}
.ntg-match{background:rgba(255,45,107,.15);color:var(--accent)}.ntg-roster{background:rgba(199,36,255,.15);color:var(--accent2)}.ntg-event{background:rgba(255,215,0,.15);color:var(--gold)}.ntg-announcement{background:rgba(0,200,150,.15);color:#00c896}
.nb h3{font-family:'Bebas Neue',sans-serif;font-size:24px;letter-spacing:2px;margin-bottom:8px;line-height:1.2}
.nb p{color:var(--muted);font-size:15px;line-height:1.6;margin-bottom:16px}
.nd{font-size:12px;color:var(--muted);letter-spacing:1px;opacity:.7}
.feat{display:grid;grid-template-columns:1.5fr 1fr;gap:28px;margin-bottom:40px}
.fc{background:var(--card);border:1px solid var(--border);border-radius:4px;overflow:hidden;position:relative;cursor:pointer;transition:all .4s}
.fc:hover{border-color:rgba(255,45,107,.3)}
.fi{height:300px;background:linear-gradient(135deg,#1a0a20,#2d1040,#1a1a2e);display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}
.fi img{width:100%;height:100%;object-fit:cover;position:absolute;inset:0}
.fi::after{content:'';position:absolute;inset:0;background:linear-gradient(to top,rgba(10,10,15,.9),transparent 60%)}
.fco{position:absolute;bottom:0;left:0;right:0;padding:32px;z-index:2}
.fco h2{font-family:'Bebas Neue',sans-serif;font-size:32px;letter-spacing:3px;line-height:1.1;margin-bottom:8px}
.fco p{color:var(--muted);font-size:15px;line-height:1.5}
.fsd{display:flex;flex-direction:column;gap:28px}

/* Matches */
.mfl{display:flex;gap:8px;margin-bottom:32px;flex-wrap:wrap}
.fb{font-family:'Rajdhani',sans-serif;font-size:13px;font-weight:700;letter-spacing:2px;text-transform:uppercase;background:var(--card);border:1px solid var(--border);color:var(--muted);padding:8px 20px;cursor:pointer;border-radius:2px;transition:all .3s}
.fb:hover,.fb.act{background:rgba(255,45,107,.1);border-color:var(--accent);color:var(--accent)}
.ml{display:flex;flex-direction:column;gap:16px}
.mr{background:var(--card);border:1px solid var(--border);border-radius:4px;padding:20px 28px;display:grid;grid-template-columns:140px 1fr auto auto;align-items:center;gap:24px;cursor:pointer;transition:all .3s;position:relative;overflow:hidden}
.mr::before{content:'';position:absolute;left:0;top:0;bottom:0;width:3px}
.mr.win::before{background:#00c896}.mr.loss::before{background:#ff4444}.mr.upcoming::before{background:var(--accent2)}
.mr:hover{border-color:rgba(255,45,107,.2);transform:translateX(4px)}
.md{font-size:13px;color:var(--muted);letter-spacing:1px}
.mt{display:flex;align-items:center;gap:16px;font-family:'Bebas Neue',sans-serif;font-size:22px;letter-spacing:2px;flex-wrap:wrap}
.mt .vs{font-size:14px;color:var(--accent);font-family:'Rajdhani',sans-serif;font-weight:700}
.tl{width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;flex-shrink:0;overflow:hidden}
.tl img{width:100%;height:100%;object-fit:cover}
.ms{font-family:'Orbitron',sans-serif;font-size:20px;font-weight:700;letter-spacing:3px}
.ms.ws{color:#00c896}.ms.ls{color:#ff4444}
.mst{font-size:12px;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:4px 14px;border-radius:2px}
.sw{background:rgba(0,200,150,.1);color:#00c896}.slo{background:rgba(255,68,68,.1);color:#ff4444}.su{background:rgba(199,36,255,.1);color:var(--accent2)}

/* Match detail */
.mdh{text-align:center;padding:40px 0}
.mu{display:flex;align-items:center;justify-content:center;gap:40px;margin-bottom:24px}
.mut{display:flex;flex-direction:column;align-items:center;gap:12px}
.mut .tlg{width:90px;height:90px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:28px;font-weight:900;font-family:'Orbitron',sans-serif;border:2px solid var(--border);overflow:hidden}
.mut .tlg img{width:100%;height:100%;object-fit:cover}
.mut .tn{font-family:'Bebas Neue',sans-serif;font-size:28px;letter-spacing:4px}
.mvs{font-family:'Orbitron',sans-serif;font-size:36px;font-weight:900;color:var(--accent);text-shadow:0 0 30px var(--glow)}
.bsc{font-family:'Orbitron',sans-serif;font-size:64px;font-weight:900;letter-spacing:8px;margin:20px 0}
.bsc .scl{color:#00c896}.bsc .scs{color:var(--muted);margin:0 8px}.bsc .scr{color:#ff4444}
.mm{display:flex;justify-content:center;gap:32px;color:var(--muted);font-size:14px;letter-spacing:1px;flex-wrap:wrap}
.mpr{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;margin-top:40px}
.mc{background:var(--card);border:1px solid var(--border);border-radius:4px;padding:24px;position:relative;overflow:hidden}
.mc::after{content:'';position:absolute;top:0;left:0;right:0;height:3px}
.mc.mw::after{background:#00c896}.mc.mlo::after{background:#ff4444}
.mc h4{font-family:'Bebas Neue',sans-serif;font-size:20px;letter-spacing:2px;margin-bottom:4px}
.mc .mn{color:var(--muted);font-size:13px;letter-spacing:2px;text-transform:uppercase;margin-bottom:16px}
.msb{display:flex;align-items:center;justify-content:space-between;gap:12px}
.msb .ts{font-family:'Orbitron',sans-serif;font-size:28px;font-weight:700}
.msb .bc{flex:1;height:6px;background:rgba(255,68,68,.3);border-radius:3px;overflow:hidden}
.msb .bf{height:100%;background:#00c896;border-radius:3px;transition:width 1s}
.pbs{margin-top:32px;background:var(--card);border:1px solid var(--border);border-radius:4px;padding:28px}
.pbs h3{font-family:'Bebas Neue',sans-serif;font-size:22px;letter-spacing:3px;margin-bottom:20px;color:var(--accent)}
.pbr{display:flex;gap:12px;margin-bottom:12px;flex-wrap:wrap}
.pbi{padding:8px 16px;border-radius:3px;font-size:14px;font-weight:600;letter-spacing:1px}
.pbp{background:rgba(0,200,150,.1);border:1px solid rgba(0,200,150,.3);color:#00c896}
.pbb{background:rgba(255,68,68,.1);border:1px solid rgba(255,68,68,.3);color:#ff4444;text-decoration:line-through}
.bbk{font-family:'Rajdhani',sans-serif;font-size:14px;font-weight:700;letter-spacing:2px;text-transform:uppercase;background:none;border:1px solid var(--border);color:var(--muted);padding:10px 24px;cursor:pointer;border-radius:2px;transition:all .3s;margin-bottom:32px}
.bbk:hover{border-color:var(--accent);color:var(--accent)}
.oi2{background:var(--card);border:1px solid var(--border);border-radius:4px;padding:28px;margin-top:32px}
.oi2 h3{font-family:'Bebas Neue',sans-serif;font-size:22px;letter-spacing:3px;margin-bottom:16px;color:var(--accent2)}
.ost{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:16px}
.os{text-align:center;padding:16px;background:rgba(255,255,255,.02);border-radius:4px}
.os .v{font-family:'Orbitron',sans-serif;font-size:24px;font-weight:700;color:var(--accent)}
.os .l{font-size:12px;color:var(--muted);letter-spacing:2px;text-transform:uppercase;margin-top:4px}

/* Contact */
.tsec{margin-bottom:60px}
.tsec h2{font-family:'Bebas Neue',sans-serif;font-size:28px;letter-spacing:4px;margin-bottom:24px;padding-bottom:12px;border-bottom:1px solid var(--border);position:relative}
.tsec h2::after{content:'';position:absolute;bottom:-1px;left:0;width:60px;height:2px;background:var(--grad)}
.ag{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:24px}
.ac{background:var(--card);border:1px solid var(--border);border-radius:4px;overflow:hidden;transition:all .4s}
.ac:hover{border-color:rgba(255,45,107,.3);transform:translateY(-4px)}
.aav{width:100%;height:280px;background:linear-gradient(135deg,#1a0a20,#2d1040);display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}
.aav img{width:100%;height:100%;object-fit:cover;position:absolute;inset:0}
.aav .ph{font-size:72px;opacity:.25}
.ainf{padding:20px}
.ainf h4{font-family:'Bebas Neue',sans-serif;font-size:22px;letter-spacing:2px;margin-bottom:4px}
.arl{font-size:13px;color:var(--accent);font-weight:700;letter-spacing:2px;text-transform:uppercase;margin-bottom:8px}
.aco{font-size:14px;color:var(--muted);line-height:1.6}
.sg{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:24px}
.sc{background:var(--card);border:1px solid var(--border);border-radius:4px;padding:28px;position:relative;overflow:hidden}
.sc::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:var(--grad)}
.sc h4{font-family:'Bebas Neue',sans-serif;font-size:24px;letter-spacing:3px;margin-bottom:4px}
.sgm{font-size:13px;color:var(--accent);font-weight:600;letter-spacing:2px;text-transform:uppercase;margin-bottom:16px}
.sms{display:flex;flex-direction:column;gap:8px}
.sm{display:flex;align-items:center;gap:12px;padding:8px 12px;background:rgba(255,255,255,.02);border-radius:3px}
.mav{width:32px;height:32px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:700;flex-shrink:0}
.mnm{font-weight:600;font-size:15px}
.mrl{font-size:12px;color:var(--muted);margin-left:auto;letter-spacing:1px;text-transform:uppercase}

/* Sponsors */
.spg{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:28px}
.spc{background:var(--card);border:1px solid var(--border);border-radius:4px;padding:40px 32px;text-align:center;transition:all .4s;cursor:pointer}
.spc:hover{border-color:rgba(255,45,107,.3);transform:translateY(-4px);box-shadow:0 16px 40px rgba(0,0,0,.3)}
.spl{width:120px;height:120px;margin:0 auto 20px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:36px;font-weight:900;font-family:'Orbitron',sans-serif;position:relative;overflow:hidden}
.spl img{width:100%;height:100%;object-fit:contain;position:absolute;inset:0}
.spc h4{font-family:'Bebas Neue',sans-serif;font-size:22px;letter-spacing:3px;margin-bottom:4px}
.spt{font-size:12px;font-weight:700;letter-spacing:2px;text-transform:uppercase;margin-bottom:12px}
.td{color:var(--gold)}.tg{color:#ffd700}.ts2{color:#c0c0c0}
.spd{color:var(--muted);font-size:14px;line-height:1.5}

/* Footer */
footer{border-top:1px solid var(--border);padding:40px;text-align:center;color:var(--muted);font-size:13px;letter-spacing:2px}
footer .fl{font-family:'Orbitron',sans-serif;font-size:18px;font-weight:900;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:12px}
footer .soc{display:flex;justify-content:center;gap:20px;margin:16px 0}
footer .soc a{color:var(--muted);text-decoration:none;font-size:14px;font-weight:600;letter-spacing:1px;transition:color .3s}
footer .soc a:hover{color:var(--accent)}

/* Admin */
.ap{background:var(--card);border:1px solid rgba(255,45,107,.2);border-radius:6px;padding:32px;margin-bottom:40px;box-shadow:0 0 40px rgba(255,45,107,.05)}
.apt{font-family:'Orbitron',sans-serif;font-size:18px;font-weight:700;letter-spacing:3px;color:var(--accent);margin-bottom:24px}
.apt::before{content:'‚öôÔ∏è '}
.ail{display:flex;flex-direction:column;gap:8px;margin-bottom:24px}
.air{display:flex;align-items:center;justify-content:space-between;background:rgba(255,255,255,.02);border:1px solid var(--border);border-radius:4px;padding:12px 16px;gap:12px;flex-wrap:wrap}
.air .it{font-weight:600;font-size:15px;flex:1;min-width:120px}
.air .im{font-size:12px;color:var(--muted);letter-spacing:1px}
.abr{display:flex;gap:8px}
.ab{font-family:'Rajdhani',sans-serif;font-size:13px;font-weight:700;letter-spacing:1px;text-transform:uppercase;border:none;padding:6px 14px;border-radius:3px;cursor:pointer;transition:all .2s}
.abe{background:rgba(199,36,255,.15);color:var(--accent2)}.abe:hover{background:rgba(199,36,255,.3)}
.abd{background:rgba(255,68,68,.1);color:#ff4444}.abd:hover{background:rgba(255,68,68,.25)}
.aba{background:var(--grad);color:#fff;padding:10px 24px;font-size:14px}.aba:hover{opacity:.85}
.abs{background:rgba(0,200,150,.15);color:#00c896;padding:10px 24px;font-size:14px}.abs:hover{background:rgba(0,200,150,.3)}
.abc{background:rgba(255,255,255,.05);color:var(--muted);padding:10px 24px;font-size:14px}.abc:hover{background:rgba(255,255,255,.1)}

.af{display:flex;flex-direction:column;gap:16px;margin-top:20px;padding:24px;background:rgba(255,255,255,.02);border:1px solid var(--border);border-radius:4px}
.af label{font-size:12px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--muted);margin-bottom:4px;display:block}
.af input,.af textarea,.af select{font-family:'Rajdhani',sans-serif;font-size:15px;font-weight:500;background:var(--bg);border:1px solid var(--border);border-radius:3px;color:var(--text);padding:10px 14px;width:100%;transition:border-color .3s}
.af input:focus,.af textarea:focus,.af select:focus{outline:none;border-color:var(--accent)}
.af textarea{min-height:80px;resize:vertical}
.fr{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.fr3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px}
.fg{display:flex;flex-direction:column}
.fa{display:flex;gap:12px;margin-top:8px}
.iua{border:2px dashed var(--border);border-radius:4px;padding:20px;text-align:center;cursor:pointer;transition:all .3s;color:var(--muted);font-size:14px}
.iua:hover{border-color:var(--accent);color:var(--accent)}
.iua img{max-width:120px;max-height:120px;object-fit:cover;border-radius:4px;margin-top:8px}
.fms{border-top:1px solid var(--border);padding-top:16px;margin-top:8px}
.me{display:flex;gap:8px;align-items:center;margin-bottom:8px}
.me input{flex:1}
.me .rx{background:rgba(255,68,68,.1);color:#ff4444;border:none;padding:8px 12px;cursor:pointer;border-radius:3px;font-size:16px}
.asb{font-family:'Rajdhani',sans-serif;font-size:12px;font-weight:700;letter-spacing:1px;text-transform:uppercase;background:rgba(255,255,255,.05);border:1px dashed var(--border);color:var(--muted);padding:6px 14px;cursor:pointer;border-radius:3px;transition:all .2s}
.asb:hover{border-color:var(--accent);color:var(--accent)}

/* Login modal */
.modal-bg{position:fixed;inset:0;background:rgba(0,0,0,.8);z-index:10000;display:flex;align-items:center;justify-content:center;backdrop-filter:blur(8px)}
.modal{background:var(--card);border:1px solid rgba(255,45,107,.3);border-radius:8px;padding:40px;max-width:420px;width:90%;text-align:center;box-shadow:0 0 60px rgba(255,45,107,.1)}
.modal h2{font-family:'Orbitron',sans-serif;font-size:22px;font-weight:900;letter-spacing:4px;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:8px}
.modal p{color:var(--muted);font-size:14px;margin-bottom:24px;letter-spacing:1px}
.modal input{font-family:'Rajdhani',sans-serif;font-size:16px;font-weight:500;background:var(--bg);border:1px solid var(--border);border-radius:4px;color:var(--text);padding:12px 16px;width:100%;margin-bottom:12px;transition:border-color .3s;text-align:center}
.modal input:focus{outline:none;border-color:var(--accent)}
.modal .mbtn{font-family:'Rajdhani',sans-serif;font-size:14px;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:12px 32px;border:none;border-radius:4px;cursor:pointer;transition:all .2s;margin:4px}
.modal .mbtn-go{background:var(--grad);color:#fff}.modal .mbtn-go:hover{opacity:.85}
.modal .mbtn-x{background:rgba(255,255,255,.05);color:var(--muted)}.modal .mbtn-x:hover{background:rgba(255,255,255,.1)}
.modal .err{color:#ff4444;font-size:13px;font-weight:600;margin-top:8px;min-height:20px}
.modal .gh-note{font-size:12px;color:var(--muted);margin-top:16px;line-height:1.5;text-align:left;background:rgba(255,255,255,.02);padding:12px;border-radius:4px}
.modal .gh-note a{color:var(--accent)}

/* Saving indicator */
.saving-bar{position:fixed;top:72px;left:0;right:0;height:3px;background:var(--grad);z-index:9998;animation:savePulse 1s ease-in-out infinite}
@keyframes savePulse{0%,100%{opacity:.3}50%{opacity:1}}

.toast{position:fixed;bottom:32px;right:32px;padding:14px 28px;border-radius:4px;font-weight:700;font-size:14px;letter-spacing:1px;z-index:10000;animation:tin .4s ease-out;box-shadow:0 8px 32px rgba(0,0,0,.3)}
.toast-ok{background:#00c896;color:#fff}
.toast-err{background:#ff4444;color:#fff}
@keyframes tin{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}

.fade-in{animation:fu .6s ease-out both}
.fade-in:nth-child(1){animation-delay:0s}.fade-in:nth-child(2){animation-delay:.08s}.fade-in:nth-child(3){animation-delay:.16s}.fade-in:nth-child(4){animation-delay:.24s}.fade-in:nth-child(5){animation-delay:.32s}.fade-in:nth-child(6){animation-delay:.4s}
@keyframes fu{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}

/* Loading */
.loading{display:flex;align-items:center;justify-content:center;height:60vh;font-family:'Orbitron',sans-serif;font-size:18px;letter-spacing:4px;color:var(--accent);animation:pulse 1.5s ease-in-out infinite}

@media(max-width:900px){.feat{grid-template-columns:1fr}.ng{grid-template-columns:1fr}.mr{grid-template-columns:1fr;gap:12px}.sr{grid-template-columns:repeat(2,1fr)}.hi{padding:0 20px}.main{padding:24px 20px 60px}nav button{padding:8px 12px;font-size:12px}.fr,.fr3{grid-template-columns:1fr}.mu{flex-direction:column;gap:20px!important}}
@media(max-width:600px){nav{flex-wrap:wrap}.hero{height:350px}.sr{grid-template-columns:1fr 1fr}}
</style>
</head>
<body>
<div id="app"><div class="loading" style="margin-top:72px">LOADING...</div></div>
<script>
// =============================================
//  CONFIG ‚Äî Change your admin password here
// =============================================
const ADMIN_PASSWORD = 'KimKorp2026!';
// =============================================

let D={news:[],matches:[],admins:[],squads:[],sponsors:[]};
let page='news',mdet=null,adm=false,editing=null,fs={},saving=false,ghToken=localStorage.getItem('kk_gh_token')||'',ghRepo=localStorage.getItem('kk_gh_repo')||'',showLogin=false;

function uid(){return Date.now().toString(36)+Math.random().toString(36).slice(2,6)}
function esc(s){return(s||'').replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/</g,'&lt;')}
function csv(s){return(s||'').split(',').map(x=>x.trim()).filter(Boolean)}
function toast(m,ok=true){const e=document.createElement('div');e.className='toast '+(ok?'toast-ok':'toast-err');e.textContent=m;document.body.appendChild(e);setTimeout(()=>e.remove(),3000)}
function img2b64(file){return new Promise(r=>{const x=new FileReader();x.onload=()=>r(x.result);x.readAsDataURL(file)})}
function tc(t){return'ntg-'+t}
function trc(t){return t==='Diamond'?'td':t==='Gold'?'tg':'ts2'}

// ========== DATA LOADING ==========
async function loadData(){
  try{
    const r=await fetch('data.json?t='+Date.now());
    if(r.ok){D=await r.json();return}
  }catch(e){}
  toast('Could not load data.json',false);
}

// ========== GITHUB SAVE ==========
async function saveToGitHub(){
  if(!ghToken||!ghRepo){toast('GitHub not configured!',false);return}
  saving=true;render();
  try{
    // Get current file SHA
    const getR=await fetch(`https://api.github.com/repos/${ghRepo}/contents/data.json`,{headers:{'Authorization':'token '+ghToken,'Accept':'application/vnd.github.v3+json'}});
    let sha='';
    if(getR.ok){const gd=await getR.json();sha=gd.sha}
    // Update file
    const body={message:'Update site data',content:btoa(unescape(encodeURIComponent(JSON.stringify(D,null,2)))),branch:'main'};
    if(sha)body.sha=sha;
    const putR=await fetch(`https://api.github.com/repos/${ghRepo}/contents/data.json`,{method:'PUT',headers:{'Authorization':'token '+ghToken,'Accept':'application/vnd.github.v3+json','Content-Type':'application/json'},body:JSON.stringify(body)});
    if(putR.ok){toast('Saved & pushed to GitHub!')}
    else{const err=await putR.json();toast('GitHub error: '+(err.message||putR.status),false)}
  }catch(e){toast('Save failed: '+e.message,false)}
  saving=false;render();
}

// ========== RENDER ==========
function render(){
  document.getElementById('app').innerHTML=
    renderHeader()
    +((page==='news'||page==='wars')&&!mdet?renderHero():'')
    +(saving?'<div class="saving-bar"></div>':'')
    +'<div class="main">'+renderPage()+'</div>'
    +renderFooter()
    +(showLogin?renderLoginModal():'');
  bindAll();
}

function renderHeader(){
  const ps=[{id:'news',l:'News'},{id:'wars',l:'Wars'},{id:'contact',l:'Team'},{id:'sponsors',l:'Partners'}];
  return `<header><div class="hi"><div class="logo" data-nav="news">KIM KORP</div><nav>${ps.map(p=>`<button class="${page===p.id?'active':''}" data-nav="${p.id}">${p.l}</button>`).join('')}<button class="atgl ${adm?'on':''}" data-adm>${adm?'üîì ADMIN ON':'üîí ADMIN'}</button></nav></div></header>`;
}
function renderHero(){return `<section class="hero"><div class="hero-bg"></div><div class="hero-lines"></div><div class="dia"></div><div class="dia"></div><div class="dia"></div><div class="hero-content"><h1>KIM KORP</h1><div class="sub">FEMALE ESPORTS COLLECTIVE</div><div class="tag">Queens of the Server ‚Äî Fear the Korp</div></div></section>`}
function renderPage(){if(mdet)return renderMD();return({news:renderNews,wars:renderWars,contact:renderContact,sponsors:renderSponsors}[page]||renderNews)()}

function renderLoginModal(){
  return `<div class="modal-bg" data-closem><div class="modal" onclick="event.stopPropagation()">
    <h2>üîí ADMIN LOGIN</h2><p>Enter the admin password to manage content</p>
    <input type="password" id="pw" placeholder="Password..." autocomplete="off">
    <div id="ghFields" style="display:none;margin-top:16px;text-align:left">
      <label style="font-size:12px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--muted);display:block;margin-bottom:4px">GitHub Repository (user/repo)</label>
      <input type="text" id="ghR" placeholder="username/repo-name" value="${esc(ghRepo)}" style="margin-bottom:8px;text-align:left">
      <label style="font-size:12px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--muted);display:block;margin-bottom:4px">GitHub Personal Access Token</label>
      <input type="password" id="ghT" placeholder="ghp_xxxxx..." value="${esc(ghToken)}" style="text-align:left">
      <div class="gh-note">
        <strong>Setup:</strong> Create a <a href="https://github.com/settings/tokens?type=beta" target="_blank">Fine-grained PAT</a> with <strong>Contents: Read & Write</strong> permission for your repo. This is stored in your browser only ‚Äî never in the source code.
      </div>
    </div>
    <div class="err" id="lErr"></div>
    <div style="margin-top:16px"><button class="mbtn mbtn-go" data-login>Login</button><button class="mbtn mbtn-x" data-closem2>Cancel</button></div>
  </div></div>`;
}

// ========== NEWS ==========
function renderNews(){
  const n=D.news,f=n.filter(x=>x.featured),r=n.filter(x=>!x.featured);
  const played=D.matches.filter(m=>m.result!=='upcoming').length;
  const wins=D.matches.filter(m=>m.result==='win').length;
  const wr=played>0?Math.round(wins/played*100)+'%':'0%';
  let ap='';
  if(adm){
    ap=ghConfigBar()+`<div class="ap"><div class="apt">Manage News</div><div class="ail">${n.map(x=>`<div class="air"><span class="ntg ${tc(x.tag)}" style="margin:0">${x.tag}</span><span class="it">${x.title}</span><span class="im">${x.date}${x.featured?' ¬∑ ‚≠ê':''}</span><div class="abr"><button class="ab abe" data-en="${x.id}">Edit</button><button class="ab abd" data-dn="${x.id}">Del</button></div></div>`).join('')}</div><button class="ab aba" data-an>+ Add Post</button>${editing&&editing.t==='news'?newsForm():''}</div>`;
  }
  const th=x=>x.image?`<img src="${x.image}">`:`<span class="oi">${x.icon||'üì∞'}</span>`;
  return `<div class="pt">LATEST NEWS</div><div class="ps">Stay updated with Kim Korp</div>${ap}
    <div class="sr"><div class="sb fade-in"><div class="sv">${D.matches.length}</div><div class="sl">Matches</div></div><div class="sb fade-in"><div class="sv">${wr}</div><div class="sl">Win Rate</div></div><div class="sb fade-in"><div class="sv">${D.squads.length}</div><div class="sl">Squads</div></div><div class="sb fade-in"><div class="sv">${D.squads.reduce((a,s)=>a+s.members.length,0)}</div><div class="sl">Players</div></div></div>
    ${f.length>=2?`<div class="feat"><div class="fc fade-in"><div class="fi">${f[0].image?`<img src="${f[0].image}">`:`<span style="font-size:80px;opacity:.15">${f[0].icon}</span>`}</div><div class="fco"><span class="ntg ${tc(f[0].tag)}">${f[0].tag}</span><h2>${f[0].title}</h2><p>${f[0].excerpt}</p></div></div><div class="fsd"><div class="fc fade-in" style="flex:1"><div class="fi" style="height:100%">${f[1].image?`<img src="${f[1].image}">`:`<span style="font-size:60px;opacity:.15">${f[1].icon}</span>`}</div><div class="fco"><span class="ntg ${tc(f[1].tag)}">${f[1].tag}</span><h2 style="font-size:24px">${f[1].title}</h2></div></div></div></div>`:''}
    <div class="ng">${r.map(x=>`<div class="nc fade-in"><div class="nt">${th(x)}</div><div class="nb"><span class="ntg ${tc(x.tag)}">${x.tag}</span><h3>${x.title}</h3><p>${x.excerpt}</p><div class="nd">${x.date}</div></div></div>`).join('')}</div>`;
}
function newsForm(){
  const nw=!editing.id;const df={tag:'match',title:'',excerpt:'',date:new Date().toLocaleDateString('en-US',{month:'short',day:'numeric',year:'numeric'}),icon:'üì∞',featured:false,image:''};
  const d=nw?df:D.news.find(x=>x.id===editing.id);if(!d)return '';
  return `<div class="af" id="nf"><h3 style="font-family:'Bebas Neue';font-size:20px;letter-spacing:3px;color:var(--accent)">${nw?'ADD POST':'EDIT POST'}</h3>
    <div class="fr"><div class="fg"><label>Title</label><input id="ft" value="${esc(d.title)}"></div><div class="fg"><label>Date</label><input id="fd" value="${esc(d.date)}"></div></div>
    <div class="fg"><label>Excerpt</label><textarea id="fe">${esc(d.excerpt)}</textarea></div>
    <div class="fr3"><div class="fg"><label>Tag</label><select id="fgt"><option value="match" ${d.tag==='match'?'selected':''}>Match</option><option value="roster" ${d.tag==='roster'?'selected':''}>Roster</option><option value="event" ${d.tag==='event'?'selected':''}>Event</option><option value="announcement" ${d.tag==='announcement'?'selected':''}>Announcement</option></select></div><div class="fg"><label>Icon</label><input id="fic" value="${esc(d.icon)}"></div><div class="fg"><label>Featured?</label><select id="ff"><option value="0" ${!d.featured?'selected':''}>No</option><option value="1" ${d.featured?'selected':''}>Yes</option></select></div></div>
    <div class="fg"><label>Image</label><div class="iua" id="niu">Click to upload${d.image?`<br><img src="${d.image}">`:''}
    </div><input type="file" id="nif" accept="image/*" style="display:none"></div>
    <div class="fa"><button class="ab abs" data-sn="${nw?'new':d.id}">üíæ Save</button><button class="ab abc" data-cf>Cancel</button></div></div>`;
}

// ========== WARS ==========
function renderWars(){
  const ms=D.matches,gs=[...new Set(ms.map(m=>m.game))];
  const w=ms.filter(m=>m.result==='win').length,l=ms.filter(m=>m.result==='loss').length,u=ms.filter(m=>m.result==='upcoming').length;
  let ap='';
  if(adm){ap=ghConfigBar()+`<div class="ap"><div class="apt">Manage Matches</div><div class="ail">${ms.map(m=>`<div class="air"><span class="mst ${m.result==='win'?'sw':m.result==='loss'?'slo':'su'}" style="flex-shrink:0">${m.result.toUpperCase()}</span><span class="it">vs ${m.opponent}</span><span class="im">${m.date} ¬∑ ${m.game}</span><div class="abr"><button class="ab abe" data-em="${m.id}">Edit</button><button class="ab abd" data-dm="${m.id}">Del</button></div></div>`).join('')}</div><button class="ab aba" data-am>+ Add Match</button>${editing&&editing.t==='match'?matchForm():''}</div>`}
  return `<div class="pt">WAR ROOM</div><div class="ps">Battle history & upcoming wars</div>${ap}
    <div class="sr"><div class="sb fade-in"><div class="sv">${ms.length}</div><div class="sl">Total</div></div><div class="sb fade-in"><div class="sv" style="color:#00c896;-webkit-text-fill-color:#00c896">${w}</div><div class="sl">Wins</div></div><div class="sb fade-in"><div class="sv" style="color:#ff4444;-webkit-text-fill-color:#ff4444">${l}</div><div class="sl">Losses</div></div><div class="sb fade-in"><div class="sv" style="color:#c724ff;-webkit-text-fill-color:#c724ff">${u}</div><div class="sl">Upcoming</div></div></div>
    <div class="mfl"><button class="fb act" data-fi="all">All</button>${gs.map(g=>`<button class="fb" data-fi="${g}">${g}</button>`).join('')}<button class="fb" data-fi="win">Wins</button><button class="fb" data-fi="loss">Losses</button></div>
    <div class="ml">${ms.map(m=>`<div class="mr ${m.result} fade-in" data-mm="${m.id}" data-mg="${m.game}" data-mre="${m.result}"><div class="md">${m.date}<br><span style="color:var(--accent);font-size:11px;letter-spacing:1px">${m.game.toUpperCase()}</span></div><div class="mt"><span class="tl" style="background:var(--grad);color:#fff">KK</span><span>KIM KORP</span><span class="vs">VS</span><span class="tl" style="background:${m.oppColor};color:#fff">${m.oppLogoImg?`<img src="${m.oppLogoImg}">`:m.oppLogo}</span><span>${m.opponent.toUpperCase()}</span></div><div class="ms ${m.result==='win'?'ws':m.result==='loss'?'ls':''}">${m.score}</div><span class="mst ${m.result==='win'?'sw':m.result==='loss'?'slo':'su'}">${m.result==='upcoming'?'‚è≥ Upcoming':m.result.toUpperCase()}</span></div>`).join('')}</div>`;
}
function matchForm(){
  const nw=!editing.id;const df={opponent:'',oppLogo:'üéÆ',oppColor:'#888888',oppLogoImg:'',game:'Valorant',tournament:'',date:new Date().toLocaleDateString('en-US',{month:'short',day:'numeric',year:'numeric'}),score:'TBD',result:'upcoming',maps:[],picks:[],bans:[],oppPicks:[],oppBans:[],oppInfo:{region:'',rank:'',winrate:'',players:'5'}};
  const d=nw?df:D.matches.find(m=>m.id===editing.id);if(!d)return '';if(!fs.maps)fs.maps=[...(d.maps||[])];
  return `<div class="af" id="mf"><h3 style="font-family:'Bebas Neue';font-size:20px;letter-spacing:3px;color:var(--accent)">${nw?'ADD MATCH':'EDIT MATCH'}</h3>
    <div class="fr"><div class="fg"><label>Opponent</label><input id="fo" value="${esc(d.opponent)}"></div><div class="fg"><label>Date</label><input id="fd" value="${esc(d.date)}"></div></div>
    <div class="fr3"><div class="fg"><label>Game</label><input id="fga" value="${esc(d.game)}"></div><div class="fg"><label>Tournament</label><input id="fto" value="${esc(d.tournament)}"></div><div class="fg"><label>Result</label><select id="fre"><option value="upcoming" ${d.result==='upcoming'?'selected':''}>Upcoming</option><option value="win" ${d.result==='win'?'selected':''}>Win</option><option value="loss" ${d.result==='loss'?'selected':''}>Loss</option></select></div></div>
    <div class="fr3"><div class="fg"><label>Score</label><input id="fsc" value="${esc(d.score)}"></div><div class="fg"><label>Opp Emoji</label><input id="fol" value="${esc(d.oppLogo)}"></div><div class="fg"><label>Opp Color</label><input type="color" id="foc" value="${d.oppColor}" style="height:42px"></div></div>
    <div class="fg"><label>Opp Logo Image</label><div class="iua" id="miu">Click to upload${d.oppLogoImg?`<br><img src="${d.oppLogoImg}">`:''}
    </div><input type="file" id="mif" accept="image/*" style="display:none"></div>
    <div class="fms"><label>Maps</label><div id="mc2">${fs.maps.map((mp,i)=>`<div class="me"><input placeholder="Map" value="${esc(mp.name)}" data-mn="${i}"><input type="number" placeholder="Our" value="${mp.our}" data-mo="${i}" style="width:70px"><input type="number" placeholder="Their" value="${mp.their}" data-mt2="${i}" style="width:70px"><button class="rx" data-rm="${i}">√ó</button></div>`).join('')}</div><button class="asb" data-addmap>+ Map</button></div>
    <div class="fr"><div class="fg"><label>Our Picks (comma)</label><input id="fpk" value="${(d.picks||[]).join(', ')}"></div><div class="fg"><label>Our Bans</label><input id="fbn" value="${(d.bans||[]).join(', ')}"></div></div>
    <div class="fr"><div class="fg"><label>Opp Picks</label><input id="fopk" value="${(d.oppPicks||[]).join(', ')}"></div><div class="fg"><label>Opp Bans</label><input id="fobn" value="${(d.oppBans||[]).join(', ')}"></div></div>
    <div class="fr"><div class="fg"><label>Opp Region</label><input id="foreg" value="${esc(d.oppInfo?.region||'')}"></div><div class="fg"><label>Opp Rank</label><input id="fork" value="${esc(d.oppInfo?.rank||'')}"></div></div>
    <div class="fr"><div class="fg"><label>Opp Win Rate</label><input id="fow" value="${esc(d.oppInfo?.winrate||'')}"></div><div class="fg"><label>Opp Players</label><input id="fop" value="${esc(d.oppInfo?.players||'5')}"></div></div>
    <div class="fa"><button class="ab abs" data-sm="${nw?'new':d.id}">üíæ Save</button><button class="ab abc" data-cf>Cancel</button></div></div>`;
}

// ========== MATCH DETAIL ==========
function renderMD(){
  const m=D.matches.find(x=>x.id===mdet);if(!m)return '<p>Not found</p>';
  return `<button class="bbk" data-back style="margin-top:72px">‚Üê Back to War Room</button>
    <div class="mdh"><div class="mu"><div class="mut"><div class="tlg" style="background:var(--grad);color:#fff">KK</div><div class="tn">KIM KORP</div></div><div class="mvs">VS</div><div class="mut"><div class="tlg" style="background:${m.oppColor};color:#fff;font-size:36px">${m.oppLogoImg?`<img src="${m.oppLogoImg}">`:m.oppLogo}</div><div class="tn">${m.opponent.toUpperCase()}</div></div></div>
    ${m.result!=='upcoming'?`<div class="bsc"><span class="scl">${m.score.split(' - ')[0]}</span><span class="scs">:</span><span class="scr">${m.score.split(' - ')[1]}</span></div>`:'<div style="margin:20px 0;font-family:Orbitron;font-size:28px;color:var(--accent2);letter-spacing:4px">UPCOMING</div>'}
    <div class="mm"><span>üéÆ ${m.game}</span><span>üèÜ ${m.tournament}</span><span>üìÖ ${m.date}</span></div></div>
    ${m.maps.length?`<h3 style="font-family:'Bebas Neue';font-size:22px;letter-spacing:3px;margin-bottom:16px;color:var(--accent)">MAP RESULTS</h3><div class="mpr">${m.maps.map(mp=>{const t=mp.our+mp.their,p=t>0?(mp.our/t)*100:50,w=mp.our>mp.their;return`<div class="mc ${w?'mw':'mlo'} fade-in"><h4>${w?'‚úÖ Victory':'‚ùå Defeat'}</h4><div class="mn">${mp.name}</div><div class="msb"><span class="ts" style="color:#00c896">${mp.our}</span><div class="bc"><div class="bf" style="width:${p}%"></div></div><span class="ts" style="color:#ff4444">${mp.their}</span></div></div>`}).join('')}</div>`:''}
    ${m.picks.length||m.bans.length?`<div class="pbs"><h3>PICKS & BANS</h3><div style="margin-bottom:16px"><div style="font-size:13px;color:var(--muted);letter-spacing:2px;text-transform:uppercase;margin-bottom:8px">Kim Korp</div><div class="pbr">${m.picks.map(p=>`<span class="pbi pbp">‚úî ${p}</span>`).join('')}${m.bans.map(b=>`<span class="pbi pbb">‚úò ${b}</span>`).join('')}</div></div><div><div style="font-size:13px;color:var(--muted);letter-spacing:2px;text-transform:uppercase;margin-bottom:8px">${m.opponent}</div><div class="pbr">${(m.oppPicks||[]).map(p=>`<span class="pbi pbp">‚úî ${p}</span>`).join('')}${(m.oppBans||[]).map(b=>`<span class="pbi pbb">‚úò ${b}</span>`).join('')}</div></div></div>`:''}
    <div class="oi2"><h3>OPPONENT ‚Äî ${m.opponent.toUpperCase()}</h3><div class="ost"><div class="os"><div class="v">${m.oppInfo.region||'‚Äî'}</div><div class="l">Region</div></div><div class="os"><div class="v">${m.oppInfo.rank||'‚Äî'}</div><div class="l">Rank</div></div><div class="os"><div class="v">${m.oppInfo.winrate||'‚Äî'}</div><div class="l">Win Rate</div></div><div class="os"><div class="v">${m.oppInfo.players||'‚Äî'}</div><div class="l">Players</div></div></div></div>`;
}

// ========== CONTACT ==========
function renderContact(){
  let ap='';
  if(adm){ap=ghConfigBar()+`<div class="ap"><div class="apt">Manage Team Leads</div><div class="ail">${D.admins.map(a=>`<div class="air"><span class="it">${a.name}</span><span class="im">${a.role}</span><div class="abr"><button class="ab abe" data-ea="${a.id}">Edit</button><button class="ab abd" data-da="${a.id}">Del</button></div></div>`).join('')}</div><button class="ab aba" data-aa>+ Add Lead</button>${editing&&editing.t==='admin'?adminForm():''}</div>
    <div class="ap" style="margin-top:20px"><div class="apt">Manage Squads</div><div class="ail">${D.squads.map(s=>`<div class="air"><span class="it">${s.name}</span><span class="im">${s.game} ¬∑ ${s.members.length}p</span><div class="abr"><button class="ab abe" data-es="${s.id}">Edit</button><button class="ab abd" data-ds="${s.id}">Del</button></div></div>`).join('')}</div><button class="ab aba" data-aas>+ Add Squad</button>${editing&&editing.t==='squad'?squadForm():''}</div>`}
  return `<div class="pt" style="margin-top:72px">THE TEAM</div><div class="ps">Administration & Squad Overview</div>${ap}
    <div class="tsec"><h2>ADMINISTRATION</h2><div class="ag">${D.admins.map(a=>`<div class="ac fade-in"><div class="aav">${a.image?`<img src="${a.image}">`:'<div class="ph">üë§</div>'}</div><div class="ainf"><h4>${a.name}</h4><div class="arl">${a.role}</div><div class="aco">${a.desc}<br><span style="color:var(--accent)">‚úâ ${a.contact}</span></div></div></div>`).join('')}</div></div>
    <div class="tsec"><h2>ACTIVE SQUADS</h2><div class="sg">${D.squads.map(s=>`<div class="sc fade-in"><h4>${s.name}</h4><div class="sgm">${s.game}</div><div class="sms">${s.members.map(m=>`<div class="sm"><div class="mav">${m.name.charAt(0)}</div><span class="mnm">${m.name}</span><span class="mrl">${m.role}</span></div>`).join('')}</div></div>`).join('')}</div></div>`;
}
function adminForm(){
  const nw=!editing.id;const df={name:'',role:'',contact:'',desc:'',image:''};const d=nw?df:D.admins.find(a=>a.id===editing.id);if(!d)return '';
  return `<div class="af" id="adf"><h3 style="font-family:'Bebas Neue';font-size:20px;letter-spacing:3px;color:var(--accent)">${nw?'ADD LEAD':'EDIT LEAD'}</h3>
    <div class="fr"><div class="fg"><label>Name</label><input id="fn" value="${esc(d.name)}"></div><div class="fg"><label>Role</label><input id="frl" value="${esc(d.role)}"></div></div>
    <div class="fr"><div class="fg"><label>Email</label><input id="fce" value="${esc(d.contact)}"></div><div class="fg"><label>Description</label><input id="fds" value="${esc(d.desc)}"></div></div>
    <div class="fg"><label>Photo</label><div class="iua" id="aiu">Click to upload${d.image?`<br><img src="${d.image}">`:''}
    </div><input type="file" id="aif" accept="image/*" style="display:none"></div>
    <div class="fa"><button class="ab abs" data-sa="${nw?'new':d.id}">üíæ Save</button><button class="ab abc" data-cf>Cancel</button></div></div>`;
}
function squadForm(){
  const nw=!editing.id;const df={name:'',game:'',members:[{name:'',role:''}]};const d=nw?df:D.squads.find(s=>s.id===editing.id);if(!d)return '';
  if(!fs.mem)fs.mem=[...(d.members||[{name:'',role:''}])];
  return `<div class="af" id="sqf"><h3 style="font-family:'Bebas Neue';font-size:20px;letter-spacing:3px;color:var(--accent)">${nw?'ADD SQUAD':'EDIT SQUAD'}</h3>
    <div class="fr"><div class="fg"><label>Name</label><input id="fsn" value="${esc(d.name)}"></div><div class="fg"><label>Game</label><input id="fsg" value="${esc(d.game)}"></div></div>
    <div class="fms"><label>Members</label><div id="smc">${fs.mem.map((m,i)=>`<div class="me"><input placeholder="Player" value="${esc(m.name)}" data-sn="${i}"><input placeholder="Role" value="${esc(m.role)}" data-srl="${i}"><button class="rx" data-rms="${i}">√ó</button></div>`).join('')}</div><button class="asb" data-addmem>+ Member</button></div>
    <div class="fa"><button class="ab abs" data-ss="${nw?'new':d.id}">üíæ Save</button><button class="ab abc" data-cf>Cancel</button></div></div>`;
}

// ========== SPONSORS ==========
function renderSponsors(){
  let ap='';
  if(adm){ap=ghConfigBar()+`<div class="ap"><div class="apt">Manage Sponsors</div><div class="ail">${D.sponsors.map(s=>`<div class="air"><span class="it">${s.name}</span><span class="im spt ${trc(s.tier)}">${s.tier}</span><div class="abr"><button class="ab abe" data-esp="${s.id}">Edit</button><button class="ab abd" data-dsp="${s.id}">Del</button></div></div>`).join('')}</div><button class="ab aba" data-asp>+ Add Sponsor</button>${editing&&editing.t==='sponsor'?sponsorForm():''}</div>`}
  return `<div class="pt" style="margin-top:72px">PARTNERS & SPONSORS</div><div class="ps">Powered by the best</div>${ap}
    <div class="spg">${D.sponsors.map(s=>`<div class="spc fade-in"><div class="spl" style="background:${s.color}22;border:2px solid ${s.color}44;color:${s.color}">${s.image?`<img src="${s.image}">`:s.initials}</div><h4>${s.name}</h4><div class="spt ${trc(s.tier)}">${s.tier} Partner</div><div class="spd">${s.desc}</div></div>`).join('')}</div>`;
}
function sponsorForm(){
  const nw=!editing.id;const df={name:'',tier:'Silver',color:'#888888',desc:'',initials:'',image:''};const d=nw?df:D.sponsors.find(s=>s.id===editing.id);if(!d)return '';
  return `<div class="af" id="spf"><h3 style="font-family:'Bebas Neue';font-size:20px;letter-spacing:3px;color:var(--accent)">${nw?'ADD SPONSOR':'EDIT SPONSOR'}</h3>
    <div class="fr"><div class="fg"><label>Name</label><input id="fsn2" value="${esc(d.name)}"></div><div class="fg"><label>Tier</label><select id="fti"><option value="Diamond" ${d.tier==='Diamond'?'selected':''}>Diamond</option><option value="Gold" ${d.tier==='Gold'?'selected':''}>Gold</option><option value="Silver" ${d.tier==='Silver'?'selected':''}>Silver</option></select></div></div>
    <div class="fr3"><div class="fg"><label>Initials</label><input id="fin" value="${esc(d.initials)}"></div><div class="fg"><label>Color</label><input type="color" id="fcl" value="${d.color}" style="height:42px"></div><div class="fg"><label>Description</label><input id="fdsc" value="${esc(d.desc)}"></div></div>
    <div class="fg"><label>Logo</label><div class="iua" id="spiu">Click to upload${d.image?`<br><img src="${d.image}">`:''}
    </div><input type="file" id="spif" accept="image/*" style="display:none"></div>
    <div class="fa"><button class="ab abs" data-ssp="${nw?'new':d.id}">üíæ Save</button><button class="ab abc" data-cf>Cancel</button></div></div>`;
}

function ghConfigBar(){
  const ok=ghToken&&ghRepo;
  return `<div style="background:${ok?'rgba(0,200,150,.05)':'rgba(255,68,68,.05)'};border:1px solid ${ok?'rgba(0,200,150,.2)':'rgba(255,68,68,.2)'};border-radius:4px;padding:12px 20px;margin-bottom:20px;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:8px">
    <span style="font-size:13px;font-weight:600;letter-spacing:1px;color:${ok?'#00c896':'#ff4444'}">${ok?'‚úÖ GitHub connected: '+ghRepo:'‚ö†Ô∏è GitHub not configured ‚Äî changes won\'t persist!'}</span>
    <button class="ab abe" data-ghcfg>‚öô Configure</button></div>`;
}

function renderFooter(){return `<footer><div class="fl">KIM KORP</div><div class="soc"><a href="#">Twitter</a><a href="#">Instagram</a><a href="#">TikTok</a><a href="#">Twitch</a><a href="#">Discord</a></div><div>¬© 2026 Kim Korp Esports</div></footer>`}

// ========== EVENTS ==========
function v(id){const e=document.getElementById(id);return e?e.value:''}
function syncMaps(){if(!fs.maps)fs.maps=[];document.querySelectorAll('[data-mn]').forEach(e=>{const i=+e.dataset.mn;if(fs.maps[i])fs.maps[i].name=e.value});document.querySelectorAll('[data-mo]').forEach(e=>{const i=+e.dataset.mo;if(fs.maps[i])fs.maps[i].our=+e.value||0});document.querySelectorAll('[data-mt2]').forEach(e=>{const i=+e.dataset.mt2;if(fs.maps[i])fs.maps[i].their=+e.value||0})}
function syncMem(){if(!fs.mem)fs.mem=[];document.querySelectorAll('[data-sn]').forEach(e=>{const i=+e.dataset.sn;if(fs.mem[i])fs.mem[i].name=e.value});document.querySelectorAll('[data-srl]').forEach(e=>{const i=+e.dataset.srl;if(fs.mem[i])fs.mem[i].role=e.value})}
function imgBind(areaId,fileId){const a=document.getElementById(areaId),f=document.getElementById(fileId);if(a&&f){a.onclick=()=>f.click();f.onchange=async()=>{if(f.files[0]){const b=await img2b64(f.files[0]);a.innerHTML='Click to upload<br><img src="'+b+'">'}}}}

function bindAll(){
  // Nav
  document.querySelectorAll('[data-nav]').forEach(e=>e.onclick=()=>{page=e.dataset.nav;mdet=null;editing=null;fs={};render();scrollTo({top:0,behavior:'smooth'})});
  // Admin toggle
  document.querySelectorAll('[data-adm]').forEach(e=>e.onclick=()=>{if(!adm){showLogin=true;render()}else{adm=false;editing=null;fs={};render()}});
  // Match click
  document.querySelectorAll('[data-mm]').forEach(e=>e.onclick=()=>{mdet=e.dataset.mm;render();scrollTo({top:0,behavior:'smooth'})});
  // Back
  document.querySelectorAll('[data-back]').forEach(e=>e.onclick=()=>{mdet=null;render();scrollTo({top:0,behavior:'smooth'})});
  // Filters
  document.querySelectorAll('[data-fi]').forEach(b=>b.onclick=()=>{document.querySelectorAll('.fb').forEach(x=>x.classList.remove('act'));b.classList.add('act');const f=b.dataset.fi;document.querySelectorAll('.mr').forEach(r=>{const g=r.dataset.mg,re=r.dataset.mre;r.style.display=f==='all'?'':(f==='win'||f==='loss')?re===f?'':'none':g===f?'':'none'})});
  // Cancel form
  document.querySelectorAll('[data-cf]').forEach(e=>e.onclick=()=>{editing=null;fs={};render()});

  // Login modal
  document.querySelectorAll('[data-closem]').forEach(e=>e.onclick=()=>{showLogin=false;render()});
  document.querySelectorAll('[data-closem2]').forEach(e=>e.onclick=()=>{showLogin=false;render()});
  const pwField=document.getElementById('pw');
  if(pwField){
    pwField.focus();
    pwField.onkeydown=(e)=>{if(e.key==='Enter')document.querySelector('[data-login]')?.click()};
    pwField.oninput=()=>{const ok=pwField.value===ADMIN_PASSWORD;document.getElementById('ghFields').style.display=ok?'block':'none'}
  }
  document.querySelectorAll('[data-login]').forEach(e=>e.onclick=()=>{
    const pw=v('pw');
    if(pw!==ADMIN_PASSWORD){document.getElementById('lErr').textContent='Wrong password!';return}
    const repo=v('ghR'),token=v('ghT');
    if(repo){ghRepo=repo;localStorage.setItem('kk_gh_repo',repo)}
    if(token){ghToken=token;localStorage.setItem('kk_gh_token',token)}
    adm=true;showLogin=false;toast('Admin mode activated!');render();
  });
  // GitHub config from bar
  document.querySelectorAll('[data-ghcfg]').forEach(e=>e.onclick=()=>{showLogin=true;render();const p=document.getElementById('pw');if(p){p.value=ADMIN_PASSWORD;document.getElementById('ghFields').style.display='block'}});

  // === NEWS CRUD ===
  document.querySelectorAll('[data-an]').forEach(e=>e.onclick=()=>{editing={t:'news',id:null};fs={};render();document.getElementById('nf')?.scrollIntoView({behavior:'smooth'})});
  document.querySelectorAll('[data-en]').forEach(e=>e.onclick=()=>{editing={t:'news',id:e.dataset.en};fs={};render();document.getElementById('nf')?.scrollIntoView({behavior:'smooth'})});
  document.querySelectorAll('[data-dn]').forEach(e=>e.onclick=async()=>{if(confirm('Delete this post?')){D.news=D.news.filter(n=>n.id!==e.dataset.dn);await saveToGitHub();render()}});
  document.querySelectorAll('[data-sn]').forEach(e=>e.onclick=async()=>{
    const id=e.dataset.sn,nw=id==='new';
    const obj={id:nw?uid():id,tag:document.getElementById('fgt').value,title:v('ft'),excerpt:v('fe'),date:v('fd'),icon:v('fic'),featured:document.getElementById('ff').value==='1',image:''};
    const fi=document.getElementById('nif');
    if(fi?.files[0])obj.image=await img2b64(fi.files[0]);
    else{const ex=D.news.find(n=>n.id===id);if(ex)obj.image=ex.image}
    if(nw)D.news.unshift(obj);else{const i=D.news.findIndex(n=>n.id===id);if(i>=0)D.news[i]=obj}
    editing=null;fs={};await saveToGitHub();render();
  });
  imgBind('niu','nif');

  // === MATCH CRUD ===
  document.querySelectorAll('[data-am]').forEach(e=>e.onclick=()=>{editing={t:'match',id:null};fs={maps:[]};render();document.getElementById('mf')?.scrollIntoView({behavior:'smooth'})});
  document.querySelectorAll('[data-em]').forEach(e=>e.onclick=()=>{const m=D.matches.find(x=>x.id===e.dataset.em);editing={t:'match',id:e.dataset.em};fs={maps:m?[...m.maps]:[]};render();document.getElementById('mf')?.scrollIntoView({behavior:'smooth'})});
  document.querySelectorAll('[data-dm]').forEach(e=>e.onclick=async()=>{if(confirm('Delete?')){D.matches=D.matches.filter(m=>m.id!==e.dataset.dm);await saveToGitHub();render()}});
  document.querySelectorAll('[data-addmap]').forEach(e=>e.onclick=()=>{syncMaps();fs.maps.push({name:'',our:0,their:0});render();document.getElementById('mf')?.scrollIntoView({behavior:'smooth'})});
  document.querySelectorAll('[data-rm]').forEach(e=>e.onclick=()=>{syncMaps();fs.maps.splice(+e.dataset.rm,1);render()});
  document.querySelectorAll('[data-sm]').forEach(e=>e.onclick=async()=>{
    syncMaps();const id=e.dataset.sm,nw=id==='new';
    const obj={id:nw?uid():id,opponent:v('fo'),oppLogo:v('fol'),oppColor:v('foc'),oppLogoImg:'',game:v('fga'),tournament:v('fto'),date:v('fd'),score:v('fsc'),result:document.getElementById('fre').value,maps:[...fs.maps],picks:csv(v('fpk')),bans:csv(v('fbn')),oppPicks:csv(v('fopk')),oppBans:csv(v('fobn')),oppInfo:{region:v('foreg'),rank:v('fork'),winrate:v('fow'),players:v('fop')}};
    const fi=document.getElementById('mif');
    if(fi?.files[0])obj.oppLogoImg=await img2b64(fi.files[0]);
    else{const ex=D.matches.find(m=>m.id===id);if(ex)obj.oppLogoImg=ex.oppLogoImg}
    if(nw)D.matches.unshift(obj);else{const i=D.matches.findIndex(m=>m.id===id);if(i>=0)D.matches[i]=obj}
    editing=null;fs={};await saveToGitHub();render();
  });
  imgBind('miu','mif');

  // === ADMIN CRUD ===
  document.querySelectorAll('[data-aa]').forEach(e=>e.onclick=()=>{editing={t:'admin',id:null};fs={};render();document.getElementById('adf')?.scrollIntoView({behavior:'smooth'})});
  document.querySelectorAll('[data-ea]').forEach(e=>e.onclick=()=>{editing={t:'admin',id:e.dataset.ea};fs={};render();document.getElementById('adf')?.scrollIntoView({behavior:'smooth'})});
  document.querySelectorAll('[data-da]').forEach(e=>e.onclick=async()=>{if(confirm('Delete?')){D.admins=D.admins.filter(a=>a.id!==e.dataset.da);await saveToGitHub();render()}});
  document.querySelectorAll('[data-sa]').forEach(e=>e.onclick=async()=>{
    const id=e.dataset.sa,nw=id==='new';
    const obj={id:nw?uid():id,name:v('fn'),role:v('frl'),contact:v('fce'),desc:v('fds'),image:''};
    const fi=document.getElementById('aif');
    if(fi?.files[0])obj.image=await img2b64(fi.files[0]);
    else{const ex=D.admins.find(a=>a.id===id);if(ex)obj.image=ex.image}
    if(nw)D.admins.push(obj);else{const i=D.admins.findIndex(a=>a.id===id);if(i>=0)D.admins[i]=obj}
    editing=null;fs={};await saveToGitHub();render();
  });
  imgBind('aiu','aif');

  // === SQUAD CRUD ===
  document.querySelectorAll('[data-aas]').forEach(e=>e.onclick=()=>{editing={t:'squad',id:null};fs={mem:[{name:'',role:''}]};render();document.getElementById('sqf')?.scrollIntoView({behavior:'smooth'})});
  document.querySelectorAll('[data-es]').forEach(e=>e.onclick=()=>{const s=D.squads.find(x=>x.id===e.dataset.es);editing={t:'squad',id:e.dataset.es};fs={mem:s?[...s.members]:[{name:'',role:''}]};render();document.getElementById('sqf')?.scrollIntoView({behavior:'smooth'})});
  document.querySelectorAll('[data-ds]').forEach(e=>e.onclick=async()=>{if(confirm('Delete?')){D.squads=D.squads.filter(s=>s.id!==e.dataset.ds);await saveToGitHub();render()}});
  document.querySelectorAll('[data-addmem]').forEach(e=>e.onclick=()=>{syncMem();fs.mem.push({name:'',role:''});render();document.getElementById('sqf')?.scrollIntoView({behavior:'smooth'})});
  document.querySelectorAll('[data-rms]').forEach(e=>e.onclick=()=>{syncMem();fs.mem.splice(+e.dataset.rms,1);render()});
  document.querySelectorAll('[data-ss]').forEach(e=>e.onclick=async()=>{
    syncMem();const id=e.dataset.ss,nw=id==='new';
    const obj={id:nw?uid():id,name:v('fsn'),game:v('fsg'),members:fs.mem.filter(m=>m.name)};
    if(nw)D.squads.push(obj);else{const i=D.squads.findIndex(s=>s.id===id);if(i>=0)D.squads[i]=obj}
    editing=null;fs={};await saveToGitHub();render();
  });

  // === SPONSOR CRUD ===
  document.querySelectorAll('[data-asp]').forEach(e=>e.onclick=()=>{editing={t:'sponsor',id:null};fs={};render();document.getElementById('spf')?.scrollIntoView({behavior:'smooth'})});
  document.querySelectorAll('[data-esp]').forEach(e=>e.onclick=()=>{editing={t:'sponsor',id:e.dataset.esp};fs={};render();document.getElementById('spf')?.scrollIntoView({behavior:'smooth'})});
  document.querySelectorAll('[data-dsp]').forEach(e=>e.onclick=async()=>{if(confirm('Delete?')){D.sponsors=D.sponsors.filter(s=>s.id!==e.dataset.dsp);await saveToGitHub();render()}});
  document.querySelectorAll('[data-ssp]').forEach(e=>e.onclick=async()=>{
    const id=e.dataset.ssp,nw=id==='new';
    const obj={id:nw?uid():id,name:v('fsn2'),tier:document.getElementById('fti').value,color:v('fcl'),desc:v('fdsc'),initials:v('fin'),image:''};
    const fi=document.getElementById('spif');
    if(fi?.files[0])obj.image=await img2b64(fi.files[0]);
    else{const ex=D.sponsors.find(s=>s.id===id);if(ex)obj.image=ex.image}
    if(nw)D.sponsors.push(obj);else{const i=D.sponsors.findIndex(s=>s.id===id);if(i>=0)D.sponsors[i]=obj}
    editing=null;fs={};await saveToGitHub();render();
  });
  imgBind('spiu','spif');
}

// ========== INIT ==========
(async()=>{await loadData();render()})();
</script>
</body>
</html>
